"use strict";(self["webpackChunkjcrew"]=self["webpackChunkjcrew"]||[]).push([[937],{6937:function(t,e,r){r.r(e),r.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("nav",{attrs:{"aria-label":"breadcrumb"}},[r("ol",{staticClass:" breadcrumb bg-light"},[r("li",{staticClass:"breadcrumb-item"},[r("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),r("li",{staticClass:"breadcrumb-item"},[t._v(" 產品列表 ")]),r("li",{staticClass:"breadcrumb-item"},[t._v(" "+t._s(t.filterCategory)+"服裝 ")]),t.filterText?r("li",{staticClass:"breadcrumb-item"},[t._v(" 搜尋 "+t._s(t.filterText)+" ")]):t._e()])]),r("div",{staticClass:"d-flex mb-2 flex-wrap"},[r("div",{staticClass:"text-center mt-0 col-12 d-flex justify-content-center align-items-center"},[r("h3",[t._v(t._s(t.filterCategory)+"服裝")]),r("a",{staticClass:"querBoxBtn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openQueryBox.apply(null,arguments)}}},[r("i",{staticClass:"fa-solid fa-plus"})])]),r("div",{staticClass:"col-lg-3 col-md-3 p-0 queryBox",class:{active:!t.queryBox}},[r("div",[r("div",{staticClass:"accordion",attrs:{id:"categoryBox"}},[r("div",{staticClass:"card border-0"},[t._m(0),r("div",{staticClass:"collapse show",attrs:{id:"collapseThree","aria-labelledby":"headingThree","data-parent":"#categoryBox"}},[r("div",{staticClass:"card-body row py-0 justify-content-around mb-2"},t._l(t.category,(function(e,s){return r("button",{key:s,staticClass:"btn  btn-sm rounded-0 w-40 mb-2 categoryBtn",class:{"btn-dark":e.choose,"btn-outline-dark":!e.choose},attrs:{type:"button"},on:{click:function(r){return t.getCategory(e.title)}}},[t._v(t._s(e.title))])})),0)]),r("hr",{staticClass:"m-0"})])]),r("div",{staticClass:"accordion",attrs:{id:"subCategoryBox"}},[r("div",{staticClass:"card border-0"},[t._m(1),r("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#subCategoryBox"}},[r("div",{staticClass:"card-body d-flex flex-column py-0 mb-2"},t._l(t.subCategories,(function(e,s){return r("div",{key:s},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterSubCategories,expression:"filterSubCategories"}],attrs:{type:"checkbox"},domProps:{value:e.title,checked:Array.isArray(t.filterSubCategories)?t._i(t.filterSubCategories,e.title)>-1:t.filterSubCategories},on:{click:t.getSubCategories,change:function(r){var s=t.filterSubCategories,a=r.target,i=!!a.checked;if(Array.isArray(s)){var o=e.title,l=t._i(s,o);a.checked?l<0&&(t.filterSubCategories=s.concat([o])):l>-1&&(t.filterSubCategories=s.slice(0,l).concat(s.slice(l+1)))}else t.filterSubCategories=i}}}),t._v(" "+t._s(e.title)+" ")])})),0)]),r("hr",{staticClass:"m-0"})])]),r("div",{staticClass:"accordion",attrs:{id:"sizeBox"}},[r("div",{staticClass:"card border-0"},[t._m(2),r("div",{staticClass:"collapse show",attrs:{id:"collapseTwo","aria-labelledby":"headingTwo","data-parent":"#sizeBox"}},[r("div",{staticClass:"card-body row py-0 justify-content-around mb-2"},t._l(t.filterSize,(function(e,s){return r("button",{key:s,staticClass:"btn btn-sm rounded-0 w-40 mb-2 sizeBtn",class:{"btn-dark":e.choose,"btn-outline-dark":!e.choose},attrs:{type:"button"},on:{click:function(r){return t.getSize({name:e.name,action:"button"})}}},[t._v(t._s(e.name))])})),0)]),r("hr",{staticClass:"m-0"})])]),r("form",{staticClass:"input-group mb-3 px-3 py-2",on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control",attrs:{type:"search",placeholder:"search"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t._m(3)])])]),r("div",{staticClass:"col-lg-9 col-md-9"},[r("div",{staticClass:"row py-2 align-items-center"},[r("div",[t._v("搜索條件：")]),t._l(t.filterSubCategories,(function(e){return r("div",{key:e,staticClass:"d-flex"},[r("button",{staticClass:"btn btn-outline-dark btn-sm rounded-0 px-2\n                 py-0 mr-2 d-flex align-items-center",attrs:{type:"button"},on:{click:function(r){return t.removeSubCategory(e)}}},[t._v(" "+t._s(e)+"  "),r("i",{staticClass:"fa-solid fa-close"})])])})),t._l(t.size,(function(e){return r("div",{key:e.name,staticClass:"d-flex"},[e.choose?r("button",{staticClass:"btn btn-outline-dark btn-sm rounded-0 px-2\n                 py-0 mr-2 d-flex align-items-center",attrs:{type:"button"},on:{click:function(r){return t.removeSize(e.name)}}},[t._v(" "+t._s(e.name)+"  "),r("i",{staticClass:"fa-solid fa-close"})]):t._e()])})),""!=t.filterText?r("div",{staticClass:"d-flex"},[r("button",{staticClass:"btn btn-outline-dark btn-sm rounded-0 px-2\n                 py-0 mr-2 d-flex align-items-center",attrs:{type:"button"},on:{click:function(e){return t.removeFilterText()}}},[t._v(" 關鍵字："+t._s(t.filterText)+"  "),r("i",{staticClass:"fa-solid fa-close"})])]):t._e(),r("div",[r("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeAll.apply(null,arguments)}}},[t._m(4)])]),r("div",{staticClass:"ml-auto pr-3 d-flex align-items-center"},[r("div",{staticClass:"mr-2"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.nowPage,expression:"nowPage"}],staticClass:"p-1",attrs:{name:"",id:""},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.nowPage=e.target.multiple?r:r[0]}}},t._l(t.totalPage,(function(e,s){return r("option",{key:s,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),t._v(" of "+t._s(t.totalPage)+" ")]),r("small",[t._v("共 "+t._s(t.listProducts.length)+" 筆")])])],2),r("div",{staticClass:"row align-items-center mb-2"}),r("div",{staticClass:"row list"},t._l(t.listProducts,(function(e){return r("div",{key:e.id,staticClass:"col-lg-4 px-0 py-2"},[r("div",{staticClass:"card"},[r("router-link",{style:{background:"url("+e.imageUrl+") center center no-repeat",backgroundSize:"cover",height:"200px",cursor:"pointer"},attrs:{to:"productslist/"+e.id}}),r("div",{staticClass:"favorite"},[r("a",{directives:[{name:"show",rawName:"v-show",value:e.is_favorite,expression:"product.is_favorite"}],staticClass:"text-danger",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.removeFavorite(e,!1)}}},[r("i",{staticClass:"fas fa-heart fa-lg"})]),r("a",{directives:[{name:"show",rawName:"v-show",value:!e.is_favorite,expression:"!product.is_favorite"}],staticClass:"text-danger",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.addFavorite(e)}}},[r("i",{staticClass:"far fa-heart fa-lg"})])]),r("div",{staticClass:"card-body py-2"},[r("h5",{staticClass:"card-title mb-0"},[t._v(" "+t._s(e.title))]),r("div",{staticClass:"d-flex align-items-baseline"},[r("p",{staticClass:"card-text text-secondary mb-0"},[e.origin_price!==e.price?r("del",[t._v(" "+t._s(t._f("currency")(e.origin_price)))]):t._e()]),r("p",{staticClass:"card-text ml-auto h5",class:{"text-danger":e.origin_price!==e.price}},[t._v(" NT "+t._s(t._f("currency")(e.price))+" ")])])]),r("div",{staticClass:"product-more"},[r("router-link",{attrs:{to:"productslist/"+e.id}},[t._v("查看更多")])],1),e.is_enabled?t._e():r("div",{staticClass:"product-soldout"},[r("button",{staticClass:"btn btn-danger border",attrs:{disabled:""}},[t._v("Sold Out")])])],1)])})),0)])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header border-0 bg-transparent",attrs:{id:"headingThree"}},[r("a",{staticClass:"d-flex justify-content-between align-items-center",attrs:{href:"#","data-toggle":"collapse","data-target":"#collapseThree","aria-expanded":"true","aria-controls":"collapseThree"}},[r("b",[t._v("主分類")]),r("i",{staticClass:"fa-solid fa-plus"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header border-0 bg-transparent",attrs:{id:"headingOne"}},[r("a",{staticClass:"boxCheck d-flex justify-content-between align-items-center",attrs:{href:"#","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[r("b",[t._v("子分類")]),r("i",{staticClass:"fa-solid fa-plus"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-header border-0 bg-transparent",attrs:{id:"headingTwo"}},[r("a",{staticClass:"d-flex justify-content-between align-items-center",attrs:{href:"#","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"true","aria-controls":"collapseTwo"}},[r("b",[t._v("Size")]),r("i",{staticClass:"fa-solid fa-plus"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-append"},[r("button",{staticClass:"input-group-text bg-light"},[r("i",{staticClass:"fas fa-search"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b",[r("u",[t._v("clear all")])])}],i=r(629),o={data(){return{listProductLength:9,nowPage:1,queryBox:!0,filterText:"",searchText:"",category:[{title:"男士",choose:!1},{title:"女士",choose:!1}],subCategories:[{title:"套裝"},{title:"上半身"},{title:"下半身"}],filterSubCategories:[],size:[{name:"S",choose:!1},{name:"M",choose:!1},{name:"L",choose:!1},{name:"XL",choose:!1},{name:"2L",choose:!1},{name:"3L",choose:!1}],querySize:[]}},computed:{totalPage:function(){const t=this;return t.filterProducts.length%t.listProductLength===0?Math.floor(t.filterProducts.length/t.listProductLength):Math.floor(t.filterProducts.length/t.listProductLength)+1},filterCategory:function(){const t=this,e=t.$route.query.category;return t.category.forEach(((r,s)=>{e===r.title?t.category[s].choose=!0:t.category[s].choose=!1})),e},filterSize:function(){const t=this,e=new Set(t.$route.query.size);return t.size.forEach(((r,s)=>{e.has(r.name)?t.size[s].choose=!0:t.size[s].choose=!1})),t.size},filterProducts:function(){const t=this;let e=t.products;if(t.favorites.forEach((t=>{const r=t.id;e.forEach(((t,s)=>{t.id===r&&(e[s].is_favorite=!0)}))})),t.$route.query.category&&(e=e.filter((e=>e.options.mainCategory===t.$route.query.category))),t.$route.query.subCategory&&0!==t.$route.query.subCategory.length){const r=new Set(t.$route.query.subCategory);e=e.filter((t=>!!r.has(t.category)))}if(t.$route.query.size&&0!==t.$route.query.size.length){const r=new Set(t.$route.query.size);e=e.filter((t=>{let e=!1;return t.options.size.forEach((t=>{r.has(t)&&(e=!0)})),e}))}return t.$route.query.filterText&&""!==t.$route.query.filterText&&(e=e.filter((e=>e.title.toLowerCase().match(t.$route.query.filterText.toLowerCase())))),e},listProducts:function(){const t=this;return t.filterProducts.slice((t.nowPage-1)*t.listProductLength,t.nowPage*t.listProductLength)},...(0,i.Se)("productsModules",["products"]),...(0,i.Se)("favoriteModules",["favorites"])},watch:{"$route.query":function(){const t=this;t.getProducts(),t.nowPage=1}},methods:{openQueryBox(){const t=this;t.queryBox=!t.queryBox},addFavorite(t){const e=this;e.$store.dispatch("favoriteModules/addToFavorite",t)},removeFavorite(t,e){const r=this;r.$store.dispatch("favoriteModules/removeFavorite",{favoriteItem:t,delall:e})},getCategory(t){const e=this;e.filterText="",e.querySize=[],e.filterSubCategories=[],e.$router.push({path:"/productslist",query:{category:t}})},getSubCategories(){setTimeout((()=>{const t=this;t.routeMethod()}),0)},getSize(t){const e=this;e.$route.query.size?e.$route.query.size=new Set(e.$route.query.size):e.$route.query.size=new Set,"button"===t.action?e.$route.query.size.has(t.name)?e.$route.query.size.delete(t.name):e.$route.query.size.add(t.name):e.$route.query.size.delete(t.name),e.querySize=[...e.$route.query.size],console.log(e.querySize),this.routeMethod()},getProducts(){const t=this;if(t.$store.dispatch("productsModules/getProducts",{isPagination:!1}),t.$route.query.category||t.$router.push({path:"/productslist",query:{category:"女士"}}),t.$route.query.subCategory){if(!Array.isArray(t.$route.query.subCategory)){const e=[];e.push(t.$route.query.subCategory),t.$route.query.subCategory=e}t.filterSubCategories=t.$route.query.subCategory}},removeSubCategory(t){const e=this;e.filterSubCategories=e.filterSubCategories.filter((e=>e!==t)),this.getSubCategories()},removeSize(t){const e=this;e.size.forEach(((e,r)=>{e.name===t&&(e.choose=!1)})),this.getSize({name:t})},removeFilterText(){const t=this;t.filterText="",t.routeMethod()},removeAll(){const t=this;let e="";t.filterSubCategories=[],t.filterText="",t.category.forEach((t=>{t.choose&&(e=t.title)})),t.$router.push({path:"/productslist",query:{category:e}})},search(){const t=this;t.filterText=t.searchText,t.searchText="",this.routeMethod()},routeMethod(){const t=this,e={category:t.$route.query.category,subCategory:t.filterSubCategories};0!==t.querySize.length&&(e.size=t.querySize),""!==t.filterText&&(e.filterText=t.filterText),t.$router.push({path:"/productslist",query:e})}},created(){const t=this;t.getProducts()}},l=o,c=r(1001),n=(0,c.Z)(l,s,a,!1,null,"7aeb70e4",null),u=n.exports}}]);
//# sourceMappingURL=937.983c9293.js.map